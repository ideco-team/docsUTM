---
description: Как настроить морфологическую фильтрацию трафика.
---

# Морфологические словари

На вкладке **Морфологические словари** создаются и редактируются словари для проведения морфологического анализа сайтов. Если в тексте анализируемого сайта содержится достаточное для блокировки количество предварительно заданных слов и словосочетаний, доступ к ресурсу блокируется.

Для активации морфологического анализа включите опцию **Морфологический анализ**:

![](/.gitbook/assets/content-filter20.png)

{% hint style="info" %}

Для работы морфологического анализа требуется:

* Наличие хотя бы одного **включенного словаря**. Если ни один словарь не включен, морфологический анализ не проводится.
* Расшифровка трафика - создайте правило расшифровки в **Контент-фильтре**.

{% endhint %}

В  Ideco NGFW предустановлены четыре словаря (по умолчанию отключены):

* Словарь наркотических средств
* Словарь порнографии
* Словарь матерных слов
* Словарь терроризм

Предустановленные словари можно включать или отключать, но нельзя редактировать и удалять.

## Добавление морфологического словаря

1\. Нажмите **Добавить** и заполните поля:

* На вкладке **Описание**:
  * **Название** - название добавляемого словаря.
  * **Комментарий** - произвольный текст. Значение не должно быть длиннее 255 символов:

![](/.gitbook/assets/content-filter21.png)

* На вкладке **Слова**:
  * **Пороговый вес** - общий вес указанных в настройках словаря слов (целое число от 0 до 2 147 483 648). Если при проверке сайта общий вес найденных на нем слов превысит пороговый, доступ к сайту будет заблокирован:

![](/.gitbook/assets/content-filter22.png)

2\. Добавьте слова для блокировки трафика вручную или загрузите из файла:

{% tabs %}

{% tab title="Вручную" %}

Нажмите **Добавить слово** и заполните поля:

![](/.gitbook/assets/content-filter23.png)

* **Слово/словоформа** - введите слово или словосочетание для блокировки трафика.
* **Вес** - укажите целое число.

{% endtab %}

{% tab title="Загрузка из файла" %}

Нажмите **Добавить из файла** и выберите файл. В один словарь можно загружать несколько файлов. В этом случае дублирующиеся слова будут удалены, останется только одно вхождение с установленным весом.

**Требования к загрузке из файла:**

* Формат файла - CSV, кодировка - UTF-8.
* В одной строке должно быть одно слово или словосочетание и вес, разделенные точкой с запятой (`;`).
* Допустимо не указывать вес слова. В этом случае по умолчанию к каждому слову/словосочению без веса применится значение `20`, а файл будет представлять собой список без разделителей.

При неудачной загрузке файла появится окно с уведомлением **Файл не соответствует требованиям**.

<details>

<summary>Примеры файлов</summary>

* **Файл с указанием веса:**

```
слово;20
словосочетание;20
```

* **Файл без указания веса:**

```
слово
словосочетание
```

**Пример работы:**
При загрузке файлов и при **Пороговом значении** = `100` доступ к сайту будет заблокирован, если на сайте найдено 5 и более совпадений ("слово" и/или "словосочетание").

</details>

{% endtab %}

{% endtabs %}

3\. Для сохранения настроек нажмите **Добавить словарь**.

Если в таблице большое количество морфологических словарей, воспользуйтесь кнопкой **Фильтры**.

Результат морфологического анализа представлен в разделе **Отчеты и журналы -> [Журнал веб-трафика](/settings/reports/web-traffic-log.md)**:

![](/.gitbook/assets/content-filter25.png)
