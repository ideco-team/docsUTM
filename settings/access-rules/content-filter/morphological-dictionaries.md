# Морфологические словари

На вкладке создаются и редактируются словари для проведения морфологического анализа сайтов. Если в тексте анализируемого сайта содержится достаточное для блокировки количество предварительно заданных слов и словосочетаний, доступ к ресурсу блокируется.

Опция **Морфологический анализ** включается в левом верхнем углу вкладки **Морфологические словари**:

![](/.gitbook/assets/content-filter20.png)

При этом морфологический анализ проводится только с использованием включенных словарей. Если ни один словарь не включен, морфологический анализ не проводится.

{% hint style="info" %}
Проверка морфологическими словарями распространяется на весь расшифрованный трафик, поэтому для работы морфологического анализа необходимо создать в **Контент-фильтре** правило расшифровки трафика.
{% endhint %}

По умолчанию в таблицу добавлены четыре словаря, которые нельзя отредактировать или удалить:
* Словарь наркотических средств;
* Словарь порнографии;
* Словарь матерных слов;
* Словарь терроризм.

По умолчанию предустановленные словари отключены.

Для создания морфологического словаря выполните действия:

1\. Перейдите в раздел **Правила трафика -> Контент-фильтр -> Морфологические словари** и нажмите **Добавить**.

2\. На вкладке **Описание** введите название словаря и комментарий:

![](/.gitbook/assets/content-filter21.png)

3\. На вкладке **Слова** добавьте слова для блокировки трафика вручную или загрузите из файла:

![](/.gitbook/assets/content-filter22.png)

При добавлении слов вручную:
* Введите значение в поле **Пороговый вес**;

{% hint style="info" %}
**Пороговый вес** - общий вес указанных в настройках словаря слов (целое число от 0 до 2 147 483 648). Если при проверке сайта общий вес найденных на нем слов превысит пороговый, доступ к сайту будет заблокирован. 
{% endhint %}

* Нажмите **Добавить слова**;
* Заполните поля **Слово/словосочетание** и **Вес** при добавлении каждого слова:

![](/.gitbook/assets/content-filter23.png)

При загрузке слов из файла нажмите **Добавить из файла** и выберите загружаемый файл. В один словарь можно загружать несколько файлов. В этом случае дублирующиеся слова будут удалены, останется только одно вхождение с установленным весом. Значение в поле **Пороговый вес** указывается автоматически.

Требования к загрузке из файла:
* Формат файла - CSV, кодировка - UTF-8;
* В одной строке должно быть одно слово или словосочетание и вес, разделенные точкой с запятой;
* Допустимо не указывать вес слова. В этом случае по умолчанию к каждому слову/словосочению без веса применится значение 20, а файл будет представлять собой список без разделителей.

При неудачной загрузке файла появится окно с уведомлением **Файл не соответствует требованиям**.

Примеры файлов:

<details>

<summary>С указанием веса</summary>

```
слово;20
словосочетание;20
```

</details>

<details>

<summary>Без указания веса</summary>

```
слово
словосочетание
```

</details>

При загрузке указанных выше файлов и при **Пороговом значении** = 100 доступ к сайту будет заблокирован, если на нем 5 и более раз упоминается "слово" и/или "словосочетание".

4\. Для сохранения настроек нажмите **Добавить словарь**.

Если в таблице большое количество морфологических словарей, воспользуйтесь кнопкой **Фильтры**.

Результат морфологического анализа представлен в разделе **Отчеты и журналы -> Журнал веб-доступа**. В журнале также отображаются дата и время, причина запрета, название правила, название морфологического словаря, IP источника и имя пользователя:

![](/.gitbook/assets/content-filter25.png)