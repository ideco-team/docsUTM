---
description: >-
  Данная служба предназначена для ограничения скорости входящего
  интернет-трафика для пользователей сети.
---

# Ограничение скорости

{% hint style="success" %}
Название службы раздела *Ограничение скорости*: `ideco-shaper-backend`. \
Список имен служб для других разделов, доступен по [ссылке](/settings/server-management/terminal.md).
{% endhint %}

{% hint style="info" %}
Правила [Предотвращения вторжений](ips/README.md), [Контроля приложений](/settings/security-profiles/application-control.md) и **Ограничение скорости** не обрабатывают трафик между локальными сетями и сетями филиалов.

Для исключения пользователя или групп пользователей из обработки правил [Предотвращения вторжений](ips/README.md), [Контроля приложений](/settings/security-profiles/application-control.md) и **Ограничения скорости**, добавьте соответствующее правило в **Правила трафика -> Исключения**.
{% endhint %}

## Настройка ограничения скорости

Для создания правила, необходимо перейти в раздел **Правила трафика -> Ограничение скорости** и нажать кнопку **Добавить**.

Далее заполните следующие поля:

* **Название** - введите название правила, например, **Ограничение для менеджеров**; 
* **Применяются для** - выберите из выпадающего списка отдельного пользователя и/или группу;
* **Скорость \(Мбит/с\)** - лимит скорости для выбранных пользователей.

Для удобства настройки существует два типа ограничения скорости. Они могут быть применены для пользователей, групп, IP-адресов и объекта **Превышена квота** (в этот объект попадают пользователи, которые превысили квоту по трафику).

* **Персональное** - скорость будет ограничена для каждого из выбранных пользователей;
* **Общее** - скорость будет ограничена и разделится между всеми выбранными пользователями.

Например, при выборе персонального ограничения скорости, как на скриншоте ниже, лимит скорости для каждого менеджера будет равен 1 Мбит/с:

![](/.gitbook/assets/shaper.png)

При выборе общего ограничения, как в следующем примере, ширина канала для всей бухгалтерии будет равна 10 Мбит/с:

![](/.gitbook/assets/shaper1.png)

{% hint style="info" %}
При добавлении или редактировании правила, для его сохранения и применения нажмите кнопку **Применить** сверху над списком правил. Настройки будут применены.

Также не забывайте перевести ползунок в верхней части экрана около надписи **Ограничение скорости** в положение **Включен**, чтобы данный модуль работал.
{% endhint %}

![](/.gitbook/assets/shaper2.gif)

{% hint style="info" %}
Если не нажать кнопку **Применить** сверху над списком правил и покинуть раздел **Ограничение скорости**, то созданное правило сохранится, но не будет применяться. Для применения правила вернитесь в раздел **Ограничение скорости** и нажмите кнопку **Применить**.

Также сохраненные, но не примененные правила потеряются в следующий случаях:

* При перезагрузке сервера;
* В случае переключения на другую ноду кластера.
{% endhint %}

Включить или выключить правило, изменить его приоритет, редактировать или удалить можно кнопками управления в столбце **Управление**:

![](/.gitbook/assets/shaper1.gif)

## Порядок применения правил

Правила применяются сверху вниз в порядке следования в таблице до первого совпадения. То есть, если пользователь одновременно находится в нескольких группах, то к нему применяется правило, которое находится выше в списке правил.

## Особенности

При подключениях пользователей по VPN к Ideco UTM из сети Интернет, скорость трафика в локальную сеть за Ideco UTM для них может быть ограничена в соответствии с правилами по ограничению скорости для конечного устройства в локальной сети.

При авторизации пользователей из локальной сети по VPN правила ограничения скорости для них применяться не будут.
