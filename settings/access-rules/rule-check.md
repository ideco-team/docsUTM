# Проверка работы правил

На вкладке создаются правила проверки прохождения трафика через таблицы FORWARD и INPUT в **Файрволе**. Для проверки потребует выбрать нужные правила и запустить проверку.

## Создание правила проверки

Для создания проверки корректности работы правил **Файрвола** выполните действия:

1\. Перейдите в раздел **Правила трафика -> Файрвол -> Проверка работы правил** и нажмите **Добавить**:

2\. В появившемся окне заполните поля:

![](/.gitbook/assets/firewall33.png)

* **Протокол** (по умолчанию **TCP**);
* **IP-адрес** источника и назначения;
* **Порт** источника и назначения;
* **Интерфейс** источника;
* **Ожидаемое действие** назначения - предполагаемое действие правила (Разрешить или Запретить);
* **Комментарий** (не обязательное поле).

3\. Нажмите **Добавить проверку**.

Созданные проверки добавляются в таблицу проверок:

![](/.gitbook/assets/firewall34.png)

## Запуск и результат проверки

При добавлении правила запуск проверки не происходит автоматически. Для запуска проверки нужно включить выбранные правила в столбце **Управление** и нажать **Запустить проверку** в левом нижнем углу вкладки. 

{% hint style="warning" %}
Если правило не включить, проверка по нему осуществляться не будет.
{% endhint %}

В столбце **Фактическое действие** отображается действие, выявленное по итогам проверки. При совпадении ожидаемого и фактического действия проверка считается успешной:

![](/.gitbook/assets/firewall35.png)

{% hint style="warning" %}
Если выбранный при добавлении правила **Интерфейс** источника был удален (отображается **Удалено** в столбце **Интерфейс**), такая проверка завершится с фактическим действием **Запретить**.
{% endhint %}

Если опция **Блокировать весь трафик в случае неудачной попытки** включена (**не рекомендуем**), любая проверка правила с ошибкой приведет к блокировке всего трафика через NGFW. Единственный способ снятия блокировки - выполнение проверки без ошибок. Отключение опции нажатием на переключатель не сработает:

![](/.gitbook/assets/firewall36.png)

В правом нижнем углу вкладки представлены сведения о последней проверке: текущий статус (**Успешно**/**Ошибка**), время проведения и количество неудачных проверок (из числа включенных в столбце **Управление**):

![](/.gitbook/assets/firewall37.png)

Повторный запуск сбрасывает результаты предыдущей проверки.