---
description: >-
  Как скачать, установить и запустить Ideco Client на MacOS.
---

# Установка и настройка Ideco Client на MacOS

## Особенности работы Ideco Client на MacOS

* Ideco Client для MacOS требует версии системы 12.7 и выше;
* [HIP-профили](/settings/users/hip-profiles.md) на стороне агента поддерживаются **не в полном объеме**:

{% tabs %}

{% tab title="Доступные HIP-профили" %}

* ОС;
* процесс;
* антивирус (Kaspersky).

{% endtab %}

{% tab title="Недоступные HIP-профили" %}

* домен;
* межсетевой экран;
* реестр (всегда только Windows);
* службы (всегда только Windows);
* пакет обновлений Knowledge Base (всегда только Windows).

{% endtab %}

{% endtabs %}

## Скачивание

{% tabs %}

{% tab title="Для администратора" %}

Перейдите в раздел **Пользователи –> Ideco-Client**, переведите опцию **Ideco Client** в положение **Включен**, нажмите **Скачать под MacOS**:

![](/.gitbook/assets/ideco-client5.png)

{% endtab %}

{% tab title="Для пользователя" %}

Нажмите кнопку **Скачать под MacOS** в личном кабинете пользователя:

![](/.gitbook/assets/ideco-client7.png)

{% endtab %}

{% endtabs %}

## Установка

В некоторых версиях MacOS необходимо явно разрешить установку приложения не из App Store. Для этого перейдите в раздел **Защита и безопасность -> Основные** и разрешите использование приложений, загруженных из **App Store и от подтвержденных разработчиков**:

![](/.gitbook/assets/ideco-client-macos12.png)

Чтобы установить **Ideco Client** на MacOS, выполните действия:

1\. Кликните по файлу *IdecoClient.pkg* правой кнопкой мыши и выберите **Открыть**. 

<details>
<summary>MacOS Sequoia</summary>

1\. При открытии файла *IdecoClient.pkg* система сообщит о потенциальной опасности приложения. Нажмите **Готово**:

![](/.gitbook/assets/ideco-client-macos13.png)

2\. Перейдите в раздел **Конфиденциальность и безопасность** и нажмите **Все равно открыть** рядом с именем файла:

![](/.gitbook/assets/ideco-client-macos14.png)

</details>

<details>
<summary>MacOS Monterey и MacOS Sonoma</summary>

При открытии файла *IdecoClient.pkg* система выдаст предупреждение. Подтвердите действие:

![](/.gitbook/assets/ideco-client-macos1.png)

</details>

2\. Нажмите **Продолжить**. В открывшемся окне нажмите **Установить**:

![](/.gitbook/assets/ideco-client-macos3.png)

3\. Если установка завершилась успешно, на экране появится соответствующее сообщение:

![](/.gitbook/assets/ideco-client-macos4.png)

## Настройка профиля для первого запуска

Перед подключением к Ideco NGFW по внешнему IP-адресу или доменному имени без сертификата Let’s Encrypt импортируйте корневой сертификат Ideco NGFW на компьютер и убедитесь, что срок действия сертификата на домен или IP-адрес составляет **825 дней**.

Если срок действия сертификата превышает 825 дней, [загрузите](/settings/services/certificates/upload-ssl-certificate-to-server.md) на Ideco NGFW сертификат со сроком действия, не превышающим 825 дней, или [перевыпустите](/settings/services/certificates/README.md#процесс-перевыпуска-сертификата) автоматически сгенерированный сертификат.

### Установка корневого сертификата Ideco NGFW на MacOS

Скачайте корневой сертификат Ideco NGFW в разделе **Сервисы -> Сертификаты -> Загруженные сертификаты** в веб-интерфейсе NGFW или в личном кабинете пользователя по кнопке **Скачать корневой сертификат**. 

{% hint style="warning" %}
**Не храните** файл сертификата в директориях *Desktop*, *Documents* и *Downloads*: в этом случае Ideco Client не сможет получить доступ к этим файлам и прочитать их. Рекомендуем сохранить файлы в другую директорию, например, в корневую директорию домашней папки пользователя.
{% endhint %}

Для установки сертификата выполните действия:

1\. Откройте скачанный файл *root_ca.crt* в приложении **Связка ключей**, сертификат Ideco NGFW появится в папке **Система**:

![](/.gitbook/assets/ideco-client-macos10.png)

2\. Нажмите по сертификату правой кнопкой мыши и выберите **Свойства**.

3\. Установите в поле **Параметры использования сертификата** действие **Всегда доверять**:

![](/.gitbook/assets/ideco-client-macos9.png)

4\. Закройте окно свойств сертификата. Теперь сертификат помечен как надежный **для всех пользователей** устройства:

![](/.gitbook/assets/ideco-client-macos8.png)

{% hint style="danger" %}
Cертификат должен быть установлен **для всех пользователей**.\
Если сертификат установлен неправильно, то будет только для текущего пользователя. В этом случае проверьте корректность установки сертификата.
{% endhint %}

Также сертификат можно добавить с помощью команды:

```
sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain/Users/<учетная запись>/Downloads/root_ca.crt
```
5\. Перезагрузите компьютер.

## Первый запуск

1\. Запустите Ideco Client.

2\. Введите данные:

![](/.gitbook/assets/ideco-client-macos11.png)

* **Имя профиля** - может не совпадать с логином и будет использоваться при выборе профиля для авторизации.
* **Пароль** - укажите пароль пользователя.
* **Логин** и **Хост** - укажите логин и хост в зависимости от количества доменов, в которые введен NGFW:

<details>
<summary>NGFW введен в один домен</summary>

Введите **логин** в домене, в качестве **хоста** укажите домен или IP-адрес:

![](/.gitbook/assets/ideco-client-macos6.png)

</details>

<details>
<summary>NGFW введен в несколько доменов</summary>

Введите **логин** в формате **имя_домена/имя_пользователя**, в качестве **хоста** укажите **IP NGFW**:

![](/.gitbook/assets/ideco-client-macos7.png)

</details>

3\. Нажмите **Сохранить**.

4\. Для авторизации выберите профиль пользователя из выпадающего списка и нажмите **Авторизоваться**:

![](/.gitbook/assets/ideco-client-macos5.png)

## Редактирование профиля

1\. Перейдите в раздел **Настройки**, кликнув по ![](/.gitbook/assets/icon-gear2.png).

2\. Выберите профиль для редактирования, нажав ![](/.gitbook/assets/icon-edit.png), и внесите изменения в поля формы.

3\. Сохраните изменения в полях формы, нажав кнопку **Сохранить**.