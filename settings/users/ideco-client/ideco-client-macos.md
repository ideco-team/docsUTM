# Установка и настройка Ideco Client на MacOS

{% hint style="info" %}
Ideco Client для MacOS требует версии системы 12.7 и выше.
{% endhint %}

{% hint style="warning" %}
Особенности работы Ideco Client на MacOS:

* Ideco Client **не поддерживает** туннелирование по протоколу WireGuard. Возможна авторизация клиентов только в локальной сети;
* **Недоступна** авторизация пользователей через их SSO-профиль в "тихом" режиме автоподключения;
* [HIP-профили](/settings/users/hip-profiles.md) на стороне агента поддерживаются **не в полном объеме**. Доступны только профили:
    * ОС;
    * процесс.
* **Недоступны** следующие HIP-профили:
    * антивирус;
    * домен;
    * межсетевой экран;
    * реестр (всегда только Windows);
    * службы (всегда только Windows);
    * пакет обновлений KB (всегда только Windows).
{% endhint %}

Чтобы скачать файл установки **Ideco Client** для MacOS:

* В личном кабинете пользователя нажмите кнопку **Скачать Ideco Client для MacOS**.

* Перейдите в раздел **Пользователи –> Ideco-Client**, переведите опцию **Ideco Client** в положение включен, введите доменное имя в соответствующей строке и нажмите **Сохранить**. Появится кнопка **Скачать Ideco Client под MacOS**:

![](/.gitbook/assets/ideco-client5.png)

## Установка

Чтобы установить **Ideco Client** на MacOS, выполните действия: 

1\. Кликните по файлу *IdecoClient.pkg* правой кнопкой мыши и выберите **Открыть**. Если система выдаст предупреждение, подтвердите действие:

![](/.gitbook/assets/ideco-client-macos1.png)

2\. Нажмите **Продолжить**. Выберите диск для установки **Ideco Client**:

![](/.gitbook/assets/ideco-client-macos2.png)

3\. В открывшемся окне нажмите **Установить**:

![](/.gitbook/assets/ideco-client-macos3.png)

4\. Если установка завершилась успешно, на экране появится соответствующее сообщение:

![](/.gitbook/assets/ideco-client-macos4.png)

## Настройка профиля для первого запуска

{% hint style="warning" %}
Перед подключением к Ideco NGFW по внешнему IP-адресу или доменному имени без сертификата `Let's encrypt` импортируйте корневой сертификат Ideco NGFW на компьютер и убедитесь, что срок действия сертификата на домен или IP-адрес составляет **825 дней**.

Если срок действия сертификата превышает 825 дней, [загрузите](/settings/services/certificates/upload-ssl-certificate-to-server.md) на Ideco NGFW сертификат со сроком действия, не превышающим 825 дней, или [перевыпустите](/settings/services/certificates/README.md#процесс-перевыпуска-сертификата) автоматически сгенерированный сертификат.
{% endhint %}

<details>
<summary>Установка корневого сертификата Ideco NGFW на MacOS</summary>

Скачайте корневой сертификат Ideco NGFW в разделе **Сервисы -> Сертификаты -> Загруженные сертификаты** в веб-интерфейсе NGFW или в личном кабинете пользователя по кнопке **Скачать корневой сертификат**. Чтобы установить сертификат на MacOS, выполните действия:

1\. Откройте скачанный файл *root_ca.crt* в приложениии **Связка ключей**, сертификат Ideco NGFW появится в папке **Система**:

![](/.gitbook/assets/ideco-client-macos10.png)

2\. Нажмите по сертификату правой кнопкой мыши и выберите **Свойства**.

3\. Установите в поле **Параметры использования сертификата** действие **Всегда доверять**:

![](/.gitbook/assets/ideco-client-macos9.png)

4\. Закройте окно свойств сертификата. Теперь сертификат помечен как надежный для всех пользователей устройства:

![](/.gitbook/assets/ideco-client-macos8.png)

</details>

После установки корневого сертификата запустите Ideco Client. Программа установит связь с сервером и предложит ввести данные.

1\. Задайте имя профиля. Оно может не совпадать с логином и будет использоваться при выборе профиля для авторизации:

![](/.gitbook/assets/ideco-client-macos11.png)

2\. Укажите логин и хост в зависимости от количества доменов, в которые введен NGFW:

<details>
<summary>NGFW введен в один домен</summary>

Введите **логин** в домене, в качестве **хоста** укажите домен или IP-адрес:

![](/.gitbook/assets/ideco-client-macos6.png)

</details>

<details>
<summary>NGFW введен в несколько доменов</summary>

Введите **логин** в формате **имя_домена/имя_пользователя**, в качестве **хоста** укажите **IP NGFW**.

![](/.gitbook/assets/ideco-client-macos7.png)

</details>

3\. Нажмите **Сохранить**, чтобы создать новый профиль пользователя для авторизации.

4\. Для авторизации выберите профиль пользователя из выпадающего списка и нажмите **Авторизоваться**:

![](/.gitbook/assets/ideco-client-macos5.png)

## Редактирование профиля

1\. Перейдите в раздел **Настройки**, кликнув по ![](/.gitbook/assets/icon-gear2.png).

2\. Выберите профиль для редактирования, нажав ![](/.gitbook/assets/icon-edit.png), и внесите изменения в поля формы.

3\. Сохраните изменения в полях формы, нажав кнопку **Сохранить**.