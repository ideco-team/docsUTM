---
description: В статье описаны настройки каталогов для аутентификации пользователей Ideco NGFW
---

# Аутентификация

При авторизации пользователя Ideco NGFW проверяет все доступные каталоги, чтобы найти соответствие по логину и провести аутентификацию.

{% hint style="warning" %}
При обновлении до Ideco NGFW 20-й версии:

* Каталог по умолчанию не выбирается автоматически. Если его не выбрать, система будет проверять все доступные каталоги для аутентификации пользователя.  
* Проверка пользователя в каталогах происходит без указания домена (например, `username@local`). С 21-й версии такая аутентификация будет доступна только для пользователей каталога по умолчанию.
{% endhint %}

### Каталог по умолчанию 

Каталог по умолчанию используется для поиска пользователей, которые аутентифицируются без указания домена. В качестве такого каталога можно выбрать каталог **Локальные пользователи**, интегрированный домен **Active Directory**, **ALD** или **RADIUS**.

Например, если выбрать интегрированный домен AD в качестве каталога по умолчанию, пользователи смогут авторизоваться с использованием формата `username` вместо `username@<имя домена>`:

![](/.gitbook/assets/authentication.png)

{% hint style="warning" %}
Если в **Каталоге по умолчанию** указан **AD/ALD**, а интеграция с контроллером домена нарушена, пользователи каталога должны указывать доменное имя при входе. В противном случае авторизация не будет выполнена.
{% endhint %}

### Доменный суффикс

Если каталог **Локальные пользователи** не выбран по умолчанию, можно указать доменный суффикс для аутентификации пользователей в каталоге **Локальные пользователи**. Например, при суффиксе `local` локальные пользователи должны будут вводить логины в формате `username@local`:

![](/.gitbook/assets/authentication1.png)

{% hint style="info" %}
Доменный суффикс для каталога RADIUS-сервера назначается в [форме интеграции с сервером](/settings/users/radius.md). Если указан доменный суффикс для RADIUS-сервера, но интеграция с сервером не работает или не настроена, запись в таблице не будет создана.
{% endhint %}

### Алгоритм аутентификации

В таблице **Алгоритм аутентификации** перечислены все доступные каталоги и формат ввода логина для каждого каталога. В процессе проверки подлинности пользователей система обращается к каталогам в таблице, начиная с верхнего и двигаясь вниз:

![](/.gitbook/assets/authentication2.png)

Поиск пользователя при аутентификации происходит в следующем порядке:

1\. В каталоге по умолчанию, если каталог задан.

2\. В локальном каталоге, если добавлен доменный суффикс.

3\. В каталоге RADIUS-пользователей при интеграции с RADIUS и наличии доменного суффикса для RADIUS.

4\. В каталогах AD и ALD при наличии интеграции.

5\. В каталогах RADIUS при наличии интеграции.

Если пользователь не найден ни в одном из каталогов, аутентификация завершается отказом.