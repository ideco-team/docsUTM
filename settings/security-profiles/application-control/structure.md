# Пример создания иерархической структуры

**Пример**. Необходимо настроить профили **Контроля приложений** в соответствии с требованиями:
* Всем пользователям запрещены компьютерные игры, контент для взрослых, майнинг и криптовалюты;
* Доступ к социальным сетям разрешен только Отделу продвижения;
* Доступ к стриминговым сервисам разрешен только Отделу маркетинга;
* Доступ к музыкальным приложениям разрешен только Федору Федорову из Отдела маркетинга.

В описанном примере Федор Федоров - сотрудник Отдела маркетинга, а Отдел маркетинга - структурное подразделение Отдела продвижения:

![](/.gitbook/assets/tree.png)

Создайте профили в соответствии с условиями примера:

1\. Перейдите в раздел **Профили безопасности -> Контроль приложений**, чтобы создать профиль, запрещающий доступ к социальным сетям, стриминговым сервисам, музыкальным приложениям, компьютерным играм, контенту для взрослых, майнингу и криптовалютам. Нажмите **Добавить** и введите название профиля:

![](/.gitbook/assets/application-control11.png)

2\. Настройте добавленный профиль, запретив необходимые группы приложений (перечислены в описании примера), и нажмите **Сохранить** в левом нижнем углу:

![](/.gitbook/assets/application-control12.png)

3\. По аналогии создайте профиль для Отдела продвижения. Запретите компьютерные игры, контент для взрослых, майнинг и криптовалюты, разрешите соцсети.

4\. Аналогично создайте профиль для Отдела маркетинга. Для этого запретите компьютерные игры, контент для взрослых, майнинг и криптовалюты, разрешите соцсети и стриминговые сервисы.

5\. Создайте профиль для Федора Федорова: запретите компьютерные игры, контент для взрослых, майнинг и криптовалюты, разрешите соцсети, стриминговые сервисы и музыкальные приложения.

В итоге должен получиться набор профилей, учитывающий настройки, описанные в примере:

![](/.gitbook/assets/application-control14.png)

Теперь необходимо создать и включить правила в **Файрволе**, чтобы применить настройки для конкретных групп пользователей и установить приоритет прохождения трафика:

1\. Перейдите в раздел **Правила трафика -> Файрвол -> FORWARD** и нажмите **Добавить**.

2\. Заполните поля:

![](/.gitbook/assets/firewall6.png)

* Введите **Название правила** и **Комментарий**;
* В поле **Адрес** раздела **Источник** выберите группу **Все**;
* Выберите действие **Разрешить**;
* В профилях фильтрации трафика включите опцию **Контроль приложений** и выберите профиль **Запрет приложений**.

3\. Нажмите **Добавить**.

4\. Аналогично создайте правила для каждого профиля. При создании правила **Файрвола** укажите соответствующий профилю адрес источника. Например, при создании правила с профилем фильтрации **Для Отдела маркетинга** выберите в поле **Адрес** раздела **Источник** группу **Отдел маркетинга**.

5\. Чтобы трафик проходил в соответствии с условиями примера, установите в **Файрволе** следующую последовательность правил:

![](/.gitbook/assets/application-control18.png)

Чем выше в таблице стоит правило, тем выше его приоритет. \
Разрешающее правило для сотрудника не сработает, если выше в таблице **Файрвола** находится правило, запрещающее трафик для отдела, в котором работает этот сотрудник.