---
description: >-
  В этом разделе находится описание процесса создания резервных копий
  интернет-шлюза Ideco NGFW.
---

# Резервное копирование

{% hint style="success" %}
Название службы раздела **Резервное копирование**: `ideco-backup-backend`; `ideco-backup-create`; `ideco-backup-restore`; `ideco-backup-rotate`.\
Список служб для других разделов доступен по [ссылке](terminal.md).
{% endhint %}

Интернет-шлюз поддерживает следующие типы автоматического бекапа:

* на сетевое файловое хранилище по протоколу FTP;
* на сетевое файловое хранилище по протоколу NetBIOS;
* на локальный жесткий диск.

Для настройки автоматического резервного копирования перейдите в раздел **Управление сервером -> Резервное копирование -> Настройки**. Резервная копия создается каждый день в указанный в настройках час (рекомендуется выбирать ночное время для создания резервной копии).

{% hint style="info" %}
Резервные копии включают в себя все настройки, которые администратор может создать в веб-интерфейсе.

Резервные копии не включают в себя:

* Логи;
* Почту;
* Статистику web-трафика и другие отчеты;
* Любые кешируемые данные - базы антивирусов, правила IPS и т. п.;
* Любые данные, генерируемые в процессе работы системы автоматически.
{% endhint %}

Хранить бекапы можно в течение недели или месяца.

![](/.gitbook/assets/backup1.png)

## Резервное копирование на удаленное файловое хранилище по протоколу FTP

Этот тип предусматривает запись резервных копий на FTP-сервер. Ключевые параметры, необходимые для настройки резервного копирования на FTP-сервер, описаны в таблице ниже.

<table><thead><tr><th width="188">Параметр</th><th>Описание</th></tr></thead><tbody><tr><td>Адрес сервера</td><td>IP-адрес удаленного FTP-сервера, на котором будут размещаться копии базы данных</td></tr><tr><td>Логин</td><td>Имя пользователя для авторизации на FTP-сервере</td></tr><tr><td>Пароль</td><td>Пароль для авторизации на FTP-сервере</td></tr><tr><td>Путь к каталогу</td><td>Каталог, в который будут записываться копии базы данных</td></tr></tbody></table>

## Резервное копирование на сетевое файловое хранилище по протоколу NetBIOS(CIFS)

Этот тип резервного копирования предусматривает запись копии на сервер по протоколу NetBIOS (CIFS). Ключевые параметры, необходимые для настройки резервного копирования на NetBIOS-сервер, описаны в таблице.

<table><thead><tr><th width="189">Параметр</th><th>Описание</th></tr></thead><tbody><tr><td>Адрес сервера</td><td>IP-адрес удаленного NetBIOS-сервера, на котором будут размещаться копии базы данных</td></tr><tr><td>Логин</td><td>Имя пользователя для авторизации на сетевом ресурсе Windows</td></tr><tr><td>Пароль</td><td>Пароль для авторизации на сетевом ресурсе Windows</td></tr><tr><td>Путь к каталогу</td><td>Каталог, в который будут записываться копии базы данных</td></tr></tbody></table>

{% hint style="info" %}
Для доменной учетной записи формат поля **Логин** должен иметь вид: **Имя\_пользователя**.

Путь к каталогу нужно указывать в UNIX-формате. К примеру, в ОС Windows каталог открывается по следующему пути `\\192.168.1.1\dir_1\dir_2\backup`, значит в поле **Путь к каталогу** нужно прописать `dir_1/dir_2/backup`.
{% endhint %}

## Резервное копирование на локальный жесткий диск

Можно загрузить резервную копию с сервера или с компьютера на сервер с помощью веб-интерфейса либо локального меню.

* Кнопка **Добавить** позволяет создать резервную копию настроек сервера. Копии настроек создаются автоматически ежедневно;
* Кнопка **Применить** позволяет восстановить резервную копию настроек. Возможно восстановление настроек только для бэкапа версии, одинаковой с установленной на сервере;
* Кнопка **Скачать** позволяет скачать резервную копию с сервера на ваш компьютер;
* Кнопка **Удалить** удаляет резервную копию с сервера.

Интерфейс управления резервными копиями в веб-интерфейсе представлен на скриншоте ниже.

![](/.gitbook/assets/backup.png)

### Управление резервными копиями через локальное меню

* Чтобы создать новую резервную копию через локальное меню Ideco NGFW, выберите пункт **9** и нажмите **Enter**. Далее введите комментарий для резервной копии и нажмите **Enter**.

Пример создания резервной копии через локальное меню приведен на скриншоте ниже:

![](/.gitbook/assets/local-menu.png)

* Чтобы восстановить конфигурацию из резервной копии, выберите пункт **10** и нажмите **Enter**. Выберите из списка резервную копию (если копий несколько), введя пункт нужной копии, и нажмите **Enter**. Для восстановления из резервной копии необходимо перезагрузить сервер. Введите **y**, а затем **Enter** для перезагрузки.

Пример восстановления из резервной копии через локальное меню приведен на скриншоте ниже:

![](/.gitbook/assets/local-menu-recovery.png)

{% hint style="info" %}
Чтобы перенести установленный Ideco NGFW с одного сервера на другой с сохранением всех настроек, воспользуйтесь статьей [Перенос данных и настроек на другой сервер](/recipes/popular-recipes/transferring-data-to-another-server.md).
{% endhint %}
