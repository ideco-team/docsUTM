# Бекапы

Интернет-шлюз поддерживает следующие типы автоматических бекапов:

* на сетевое файловое хранилище по протоколу FTP;
* на сетевое файловое хранилище по протоколу NetBIOS;
* на локальный жесткий диск.

Для настройки автоматических бекапов перейдите в раздел **Управление сервером -> Бекапы -> Настройки**. Бекап создается каждый день в указанный в настройках час (рекомендуется выбирать ночное время).

Хранить бекапы можно в течение недели или месяца.

![](/.gitbook/assets/backup.png)

## Бекапы на удаленное файловое хранилище по протоколу FTP

Данный тип предусматривает запись бекапов на FTP-сервер. Ключевые параметры, необходимые для настройки бекапов на FTP-сервер, описаны в таблице ниже:

<table>
<thead>
<tr>
<th width="115">Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>Адрес сервера</td>
<td>IP-адрес удаленного FTP-сервера, на котором будут размещаться копии базы данных</td>
</tr>
<tr>
<td>Логин</td>
<td>Имя пользователя для авторизации на FTP-сервере</td>
</tr>
<tr>
<td>Пароль</td>
<td>Пароль для авторизации на FTP-сервере</td>
</tr>
<tr>
<td>Путь к каталогу</td>
<td>Каталог, в который будут записываться копии базы данных</td>
</tr>
</tbody>
</table>

## Бекапы на сетевое файловое хранилище по протоколу NetBIOS(CIFS)

Данный тип бекапов предусматривает запись копии на сервер по протоколу NetBIOS (CIFS). Ключевые параметры, необходимые для настройки бекапов на NetBIOS-сервер, описаны в таблице:

<table>
<thead>
<tr>
<th width="115">Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>Адрес сервера</td>
<td>IP-адрес удаленного NetBIOS-сервера, на котором будут размещаться копии базы данных</td>
</tr>
<tr>
<td>Логин</td>
<td>Имя пользователя для авторизации на сетевом ресурсе Windows</td>
</tr>
<tr>
<td>Пароль</td>
<td>Пароль для авторизации на сетевом ресурсе Windows</td>
</tr>
<tr>
<td>Путь к каталогу</td>
<td>Каталог, в который будут записываться копии базы данных</td>
</tr>
</tbody>
</table>

{% hint style="info" %}
Для доменной учётной записи формат поля **Логин** должен иметь вид: **Имя\_пользователя**. 

Путь к каталогу нужно указывать в UNIX-формате. К примеру, в ОС Windows каталог открывается по следующему пути `\\192.168.1.1\dir_1\dir_2\backup`, значит в поле **Путь к каталогу** нужно прописать `dir_1/dir_2/backup`.
{% endhint %}

## Бекапы на локальный жесткий диск

Загрузить бекап с сервера или с компьютера на сервер можно с помощью веб-интерфейса либо локального меню.

### Управление бекапами через веб-интерфейс

* **Добавить** позволяет создать бекап настроек сервера. Копии настроек создаются автоматически ежедневно;
* **Применить** позволяет восстановить бекап настроек. Возможно восстановление настроек только для бэкапа версии одинаковой с установленной на сервере;
* **Скачать** позволяет скачать бекап с сервера на ваш компьютер;
* **Удалить** удаляет бекап с сервера.

Интерфейс управления бекапами в веб-интерфейсе представлен на скриншоте ниже:

![](/.gitbook/assets/backup1.png)

### Управление бекапами через локальное меню

#### Cоздание бекапа

Для создания новой бекапа через локальное меню Ideco NGFW, выберите пункт **10** и нажмите **Enter**. Далее введите комментарий для бекапа и нажмите **Enter**.

Пример создания бекапа через локальное меню приведен на скриншоте ниже:

![](/.gitbook/assets/backup2.png)

#### Восстановление из бекапа

Для восстановления конфигурации из бекапа, выберите пункт **11** и нажмите **Enter**. Выберите из списка бекап (если копий несколько), введя пункт нужной копии, и нажмите **Enter**. Для восстановления из бекапа необходимо перезагрузить сервер. Введите **y**, а затем **Enter** для перезагрузки.

Пример восстановления из бекапа через локальное меню приведен на скриншоте ниже:

![](/.gitbook/assets/backup3.png)
