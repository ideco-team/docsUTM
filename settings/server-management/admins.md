# Администраторы

В Ideco NGFW вы можете создать локальных администраторов или интегрировать администраторов из сервисов Active Directory, ALD PRO, RADIUS.

Сведения об авторизованных администраторах представлены в разделах **Авторизация администраторов** и [Сессии администраторов](/settings/monitor/administrator-sessions.md).

{% hint style="info" %}
При бездействии в течение 15 минут администратор будет автоматически разавторизован.
{% endhint %}

## Доступ к веб-интерфейсу из внешней сети и удаленный доступ по SSH

* Для получения доступа к Ideco NGFW из внешней сети включите опцию **Доступ к веб-интерфейсу из внешней сети**. Эта функция помогает заниматься администрированием Ideco NGFW удаленно. Попытки подбора паролей блокируются автоматически.
* Для получения доступа к Ideco NGFW по SSH из локальной или внешних сетей включите соответствующие опции. Доступ осуществляется по 22 TCP-порту. Попытки подбора паролей также будут автоматически блокироваться:

![](/.gitbook/assets/admins2.png)

Подробнее о настройке подключения к веб-интерфейсу при удаленном доступе смотрите в статье [Удаленный доступ для управления сервером](/recipes/popular-recipes/remote-access-for-server-management.md).

## Управление локальными администраторами

Чтобы добавить нового локального администратора выполните действия:

1\. Перейдите в раздел **Управление сервером -> Администраторы**, на вкладку **Локальные** и нажмите кнопку **Добавить**.

2\. Заполните поля:

![](/.gitbook/assets/admins9.png)

* **Имя** - введите имя нового администратора. Значение не должно быть длиннее 42 символов;
* **Логин** - введите логин нового администратора. Значение не должно превышать 42 символа и не должно состоять только из цифр;
* **Пароль/повторите пароль** - введите пароль нового администратора. Рекомендуем использовать сложные пароли, содержащие латинские строчные и заглавные буквы, цифры и специальные символы;
* **Роль** - выберите роль:
  * **Администратор** - полный доступ к настройке Ideco NGFW;
  * **Только просмотр** - доступ к просмотру настроек Ideco NGFW;
  * **Администратор информационной безопасности** - доступ к работе с событиями безопасности;
  * **Администратор файрвола** - доступ к созданию учетных записей, работа с правилами фильтрации, управление режимами работы Файрвола;
  * **Администратор настройки доступов** - доступ к настройкам сетевого взаимодействия пользователей Файрвола, субъектов доступа, информационных систем;
  * **Просмотр отчетов** - доступ к части раздела [Отчеты и журналы](/settings/reports/README.md), а именно: **Трафик**, **Системный журнал**, **Журнал веб-доступа**, **Журнал антивируса**, **События безопасности** и **Журнал авторизации**;
  * **Создание отчетов** - доступ к части раздела [Отчеты и журналы](/settings/reports/README.md), а именно: **Трафик**, **Системный журнал**, **Журнал веб-доступа**, **Журнал антивируса**, **События безопасности**, **Журнал авторизации** и **Конструктор отчетов**.

3\. Нажмите **Добавить**.

Чтобы изменить имя и пароль администратора, нажмите на ![](/.gitbook/assets/icon-edit.png) в столбце **Управление**.
Подробнее о восстановлении пароля администратора смотрите в статье по [ссылке](/recipes/popular-recipes/restore-access-to-ideco-utm.md).

Если в таблице большое количество администраторов, воспользуйтесь кнопкой **Фильтры**.

## Управление AD/ALD администраторами

{% hint style="info" %}
Чтобы добавить администраторов, необходимо ввести NGFW в домен [Active Directory](/settings/users/active-directory/README.md) или [ALD Pro](/settings/users/ald-pro.md). При удалении домена AD/ALD из Ideco NGFW будут удалены сессии администраторов.
{% endhint %}

Чтобы интегрировать администраторов Active Directory или ALD Pro с Ideco NGFW выполните действия:

1\. Перейдите в раздел **Управление сервером -> Администраторы**, выберите нужную вкладку и нажмите кнопку **Добавить**.

2\. Заполните поля:

![](/.gitbook/assets/admins8.png)

* **Домен** - выберите доменное имя;
* **Группа безопасности** - выберите созданную [группу безопасности](/settings/users/active-directory/README.md#nastroika-uchetnykh-zapisei-i-grupp-bezopasnosti-v-kachestve-obektov-pravil-filtracii);
* **Роль** - выберите роль. Роли AD/ALD администраторов идентичны ролям локальных администраторов.

3\. Нажмите **Добавить**.

**Особенности работы:**

* Если администратор был авторизован по правилу или группе безопасности, которые были удалены, его сессия будет удалена. Это произойдет только после синхронизации групп безопасности на Ideco NGFW, которая выполняется каждые 5 минут;
* Если администратора исключить из группы безопасности, он не будет удален сразу. Его сессия завершится через некоторое время, и при следующей попытке авторизации он не сможет войти в систему;
* Если администратор соответствует нескольким правилам при авторизации, например, входит в несколько выбранных групп безопасности, ему будет отказано в доступе. Это необходимо, чтобы избежать проблем в определении прав доступа для администратора.

## Управление RADIUS-администраторами

### Особенности настройки RADIUS-сервера

В Ideco NGFW используется **Vendor Code** 39410. Для авторизации через RADIUS укажите атрибуты: 

```
ATTRIBUTE   Ideco-Administrator-Role    	30  string
ATTRIBUTE   Ideco-Administrator-Name    	31  string
```

`Ideco-Administrator-Role` обязателен для авторизации, а `Ideco-Administrator-Name` опционален. Атрибуты передают ID роли и ФИО администратора соответственно.

Чтобы узнать ID роли RADIUS-администратора:

1\. Перейдите в раздел **Управление сервером -> Администраторы -> Роли**;

2\. Нажмите на **Отображение** и включите столбец ID. ID роли появится в левом столбце таблицы.

<details>

<summary>ID роли администраторов</summary>

* `predefined_admin_write` - Администратор;
* `predefined_admin_readonly` - Только просмотр;
* `predefined_security_admin` - Администратор информационной безопасности;
* `predefined_firewall_admin` - Администратор файрвола;
* `predefined_access_settings_admin` - Администратор настройки доступов;
* `predefined_reports_view` - Просмотр отчетов;
* `predefined_reports_change` - Создание отчетов.

</details>

### Интеграция администраторов RADIUS с Ideco NGFW

Выполните действия:

1\. Перейдите в раздел **Управление сервером -> Администраторы**, на вкладку **RADIUS** и включите опцию **Интеграция с RADIUS-сервером**.

2\. Укажите доменное имя или IP-адрес внутреннего RADIUS-сервера и секрет (пароль доступа). Если требуется, поменяйте порт, по которому будет происходить подключение к серверу:

![](/.gitbook/assets/admins3.png)

При наличии в сети двух RADIUS-серверов настройте один как резервный с указанием порта подключения.
При отсутствии ответа от основного RADIUS-сервера запрос об аутентификации будет перенаправлен на резервный RADIUS-сервер.

3\. Нажмите **Сохранить**.

## Особенности удаления администраторов

* Если администратора удалить из раздела **Администраторы**, его сессия будет автоматически завершена, и он потеряет доступ к веб-интерфейсу;
* Если администратора удалить из группы безопасности, то сессия будет автоматически завершена через 24 часа после авторизации.

Чтобы удалить администратора, нажмите на ![](/.gitbook/assets/icon-delete1.png) напротив нужной учетной записи. Можно удалить и собственный аккаунт.

{% hint style="warning" %}
Не рекомендуем удалять или отключать всех администраторов с ролью **Администратор**, это приведет к тому, что доступ к настройке Ideco NGFW будет потерян. Если подобное произошло, обратитесь в [Техническую поддержку](/general/technical-support.md).
{% endhint %}

## Аутентификация администраторов

{% hint style="success" %}
Ideco NGFW не только блокирует попытки авторизации с неправильными логином или паролем, но и обнаруживает случаи, когда не удается получить информацию об администраторе из контроллера домена.
Если администратор не соответствует ни одному из правил авторизации, Ideco NGFW считает попытку авторизации неудачной и блокирует доступ, если количество неудачных попыток превышает допустимое.
{% endhint %}

Чтобы получить доступ к веб-интерфейсу Ideco NGFW, администратору нужно выполнить процедуру аутентификации, указав логин и пароль.

Для разных групп администраторов предусмотрены разные логины:

* **Локальный администратор** - логин в формат `User`;
* **AD/ALD администратор** - логин в формате `User@test.com`, где `test.com` домен;
* **RADIUS администратор** - логин в формате `User@radius`, где `@radius` обязательная часть логина.