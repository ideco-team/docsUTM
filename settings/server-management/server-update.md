---
description: Параметры автоматического обновления настраиваются в разделе Управление сервером -> Обновления.
---

# Обновления

{% hint style="success" %}
Название службы раздела **Обновления**: `ideco-sysupdate-backend`. \
Список служб для других разделов доступен по [ссылке](/settings/server-management/terminal/README.md).
{% endhint %}

{% hint style="warning" %}
Для отключения автоматического обновления Ideco NGFW в строке **Отложить обновление** выберите **Навсегда**.
{% endhint %}

## Система

Обновить систему Ideco NGFW можно как в офлайн-режиме, так и по сети. Отрегулировать режим обновления можно в разделе **Управление сервером -> Лицензия**.

В режиме **Автоматического обновления** доступны следующие настройки:

![](/.gitbook/assets/updates.png)

* **Канал обновлений** - выберите **Релиз** или **Тестовый**. Канал **Релиз** позволяет обновляться на стабильно работающие версии. Канал **Тестовый** позволяет быстрее обновляться как на релизные версии, так и на последние бета-версии продукта во время коротких периодов бета-тестирования новых мажорных версий. По умолчанию выбран пункт **Релиз**;
* **Отложить обновления** - время, на которое будет отложено обновление (максимальный срок 6 месяцев с даты релиза последней версии, до которой доступно обновление);
* **День недели** - день недели запуска автоматического обновления;
* **Час автоматической перезагрузки** - позволяет выбрать час запуска автоматического обновления;
* **Запустить обновление** - запускает механизм принудительного обновления. Если кнопка неактивна, обновления отсутствуют.

Обновить серверы Ideco NGFW, подключенные к центральной консоли, можно через Ideco Center. Для этого нужно перейти в интерфейс NGFW одним из способов, указанных в разделе [Центральная консоль](/settings-cc/README.md). 

В режиме **Ручной загрузки** обновлений необходимо скачать ISO-образ новой версии Ideco NGFW в личном кабинете MY.IDECO и загрузить его с внешнего носителя:

![](/.gitbook/assets/updates1.png)

{% hint style="info" %}
Кнопка принудительного обновления активна, когда обновление уже скачано, и только применяет его, инициировать скачивание нельзя.

После принудительного обновления потребуется полная перезагрузка сервера. 
{% endhint %}

{% hint style="warning" %}
Если активная нода кластера не синхронизирована с резервной или с момента последней синхронизации прошло более 30 минут, ее обновления будут заблокированы. Произойдет переключение нод кластера. Нода с младшей версией сможет обновиться без синхронизации.

При офлайн-обновлении кластера с синхронизацией сессий обновления баз **Предотвращения вторжений**, **Контент-фильтра** и **Антивирусов веб-трафика** не синхронизируются, каждая нода обновляется отдельно. Вторая нода обновится после того, как станет активной.
{% endhint %}

После проведения процедуры обновления новая версия будет отображаться в верхнем левом углу локальной консоли и веб-интерфейса администратора.

### Восстановление на предыдущую версию

![](/.gitbook/assets/updates2.png)

Кнопка **Восстановить** позволяет вернуться к предыдущей версии NGFW. Система будет перезагружена, при этом текущие настройки будут потеряны. После восстановления отложите автоматическое обновление.

Если в **Ideco NGFW** настроен кластер, то в веб-интерфейсе будет отсутствовать пункт **Восстановление на предыдущую версию**.

{% hint style="warning" %}
При восстановлении на предыдущую версию данные перенесены не будут. Сохраните информацию на внешнем носителе.
{% endhint %}

### Процесс выхода релизов в каналы обновлений

**Тестовый** канал обновлений позволяет быстрее обновляться до новых версий (релизных или бета-версий во время их активного тестирования). После выхода бета-версии NGFW в **Тестовый** канал ожидается обратная связь от пользователей по использованию новой версии продукта. Обратная связь позволяет выявить недочеты и уязвимости в продукте. После их исправления происходит выкладка в канал **Релиз**.

{% hint style %}
Если в версии NGFW, вышедшей в канал **Релиз**, в ходе использования выявляются недочеты, то они исправляются ближайшими обновлениями версии. Обновление в канале **Релиз** появляется постепенно.
{% endhint %}

### Особенности обновления NGFW

* Обновление будет автоматически установлено в указанное в настройках время после релиза новой версии.
* Обновления можно отложить на срок до шести месяцев или навсегда. Если отложить обновление на определенный срок, то период будет отсчитываться от **даты релиза** последнего доступного обновления и корректироваться в соответствии с указанным для обновления днем недели. 
* Даты релизов можно посмотреть на [сайте](https://ideco.ru/changelog) или в документации в разделе [Changelog](/changelog/ideco-utm/README.md).
* Номер мажорной версии NGFW - часть номера до точки (например, 14.x), номер минорной версии - часть после точки (например, x.7).
* Автоматическое обновление Ideco NGFW на следующую мажорную версию возможно только после обновления до последней выпущенной в релиз минорной версии. Например, UTM 14.2 можно обновить до версии 14.10, а затем - до версии 15.7. 

{% hint style="warning" %}
Если обновление было отложено на шесть месяцев, но за это время вышел новый минорный релиз, дата обновления сдвигается. Шесть месяцев теперь отсчитываются с даты выхода последнего доступного минорного релиза.
{% endhint %}

## Базы фильтрации

![](/.gitbook/assets/selfupdate.png)

На вкладке доступны обновления баз модулей фильтрации Ideco NGFW - баз **Контент-фильтра** и модуля **Предотвращения вторжений**, а также баз соответствия подсетей и стран (GeoIP). 

{% hint style="info" %}
Ручная загрузка необходима только в случае, если сервер не имеет доступа в интернет, а в разделе **Управление сервером -> Лицензия** выбран способ обновления **Ручная загрузка**.
{% endhint %}

Чтобы загрузить на Ideco NGFW файлы обновления баз, скачайте их в личном кабинете [MY.IDECO](https://my.ideco.ru/) одним из способов: 

1\. В интерфейсе Ideco NGFW в разделе **Управление сервером -> Обновления** скачайте файл или перейдите по ссылке и загрузите файлы:

![](/.gitbook/assets/my-ideco-ngfw.png)

2\. В интерфейсе MY.IDECO напротив названия сервера нажмите ![](/.gitbook/assets/icon-download.png) и вставьте ссылку, скопированную в разделе **Обновления -> Базы фильтрации**, в открывшуюся форму. Скачайте файлы.

В веб-интерфейс Ideco NGFW перейдите в раздел **Управление сервером -> Обновления -> Базы фильтрации** и загрузите скачанные файлы, нажав на соответствующие кнопки.

{% hint style="danger" %}
Базы фильтрации Ideco NGFW могут меняться ежедневно, поэтому при ручной загрузке обновляйте их как можно чаще.
{% endhint %}