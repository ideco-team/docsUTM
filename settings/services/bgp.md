---
description: Настройка BGP для обмена информацией о доступности сетей.
---

# BGP

{% hint style="success" %}
Название службы раздела **BGP**: `frr.service`; `ideco-routing-backend`. \
Список служб для других разделов доступен по [ссылке](/settings/server-management/terminal.md).
{% endhint %}

BGP (Border Gateway Protocol) — это основной протокол динамической маршрутизации, который используется в интернете.

{% hint style="info" %}
При настройке BGP доступны GRE-интерфейсы.
{% endhint %}

Для запуска сервиса он должен быть не только включен, но и корректно настроен: должен быть создан и включен хотя бы один BGP-сосед.

## Настройка своей автономной системы

1\. Введите номер автономной системы в строку **Номер AS** и нажмите **Сохранить**:

![](/.gitbook/assets/bgp.png)

2\. Переведите опцию раздела **BGP** в положение **включен**;

3\. Ideco NGFW заполнит поле **Router ID** автоматически.

## Настройка BGP-соседей

1\. Для добавления BGP-соседа нажмите **Добавить** в правом верхнем углу;

2\. Заполните поля:

![](/.gitbook/assets/bgp1.png)

* **Название** - любое значение;
* **IP-адрес** - IP-адрес BGP-соседа;
* **Номер AS** - номер AS BGP-соседа;
* **Входящие сети** - фильтр, в котором нужно выбрать сети, информацию от которых хотите получать. Если выбран объект **Любой**, то фильтрация будет отключена и будут приниматься все сети от BGP-соседа. Предустановленный объект фильтров **Маршрут по умолчанию** соответствует фильтру **0.0.0.0/0**;
* **Анонсируемые сети** - фильтр, в котором нужно выбрать сети, информацию о которых хотите отправлять. Если выбран объект **Любой**, то фильтрация будет отключена и будет передаваться информация обо всех маршрутах, известных NGFW (redistribute static, connected, ospf ). Предустановленный объект фильтров **Маршрут по умолчанию** соответствует фильтру **0.0.0.0/0**;
* **AS-Path Prepend** - чем больше значение, тем менее приоритетным становится канал;
* **Local Preference** - определяет приоритет пути для выхода трафика. Чем больше значение, тем более приоритетным становится канал;
* **MED** - определяет приоритет пути для входа трафика. Чем меньше значение, тем приоритетнее путь.

{% hint style="info" %}
Для динамической маршрутизации сетей двух NGFW, соединенных по IPSec, воспользуйтесь BGP. Подробнее про настройку подключения двух NGFW по IPSec - в статье [Подключение по IPsec между двумя Ideco NGFW](/settings/services/ipsec/site-to-site/ipsec-utm-to-utm-tunnel.md)
{% endhint %}

{% hint style="info" %}
Для **Входящих сетей** и **Анонсируемых сетей** объект **Любой** не может быть установлен одновременно с другими фильтрами.
{% endhint %}

Если нужного объекта для фильтрации нет, то создать его можно, выбрав **Создать новый объект** в поле **Входящие сети** или **Анонсируемые сети**:

![](/.gitbook/assets/bgp2.png)

* **Название** - любое значение;
* **Значение** - значение подсети в формате: `подсеть/маска подсети`, например, `192.168.100.0/24`.
