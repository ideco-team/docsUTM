---
description: В статье описаны возможности личного кабинета пользователя в Ideco NGFW (публикация и управление доступом пользователей).
---

# ЛК/Портал SSL VPN

Возможности личного кабинета Ideco NGFW:

* [x] **Смена пароля**;
* [x] **Скачивание корневого сертификата**;
* [x] **Скачивание скриптов для создания автоматического VPN-подключения в Windows 8 и 10**. Будут доступны скрипты настройки только тех типов подключения, которые указаны для пользователя в таблице **Доступ по VPN** в разделе **Пользователи -> VPN-подключения**;
* [x] **Информация о квоте**;
* [x] **Генерация TOTP-токена**. Для настройки двухфакторной аутентификации воспользуйтесь [статьей](/settings/users/two-factor-authentication.md);
* [x] **Скачивание Ideco Client**. Подробнее о работе в Ideco Client - в [статье](/settings/users/ideco-client/README.md);
* [x] **Тестирование скорости**. При нажатии на соответствующую кнопку в веб-интерфейсе личного кабинета откроется меню тестирования скорости между хостом и NGFW;
* [x] **Разавторизация**. Разавторизация пользователя в сети NGFW, если он был авторизован через Web/SSO.

![](/.gitbook/assets/user-personal-account5.png)

Настроить доступ пользователей в личный кабинет можно в разделе **Пользователи -> Личный кабинет пользователя**. Для этого необходимо создать **Правило доступа**, а затем опубликовать личный кабинет через обратный прокси, чтобы пользователи получили к нему доступ.

## Правила доступа

По умолчанию в таблице правил раздела предусмотрено правило доступа к личному кабинету, которое применяется ко всем пользователям:

![](/.gitbook/assets/user-personal-account1.png)

<details>

<summary>Тест скорости</summary>

Опция **Тест скорости** предоставляет пользователям возможность проверить скорость интернета в личном кабинете, нажав на соответствующую кнопку.

В разделе **Тестирование интернет-соединения** пользователь может проверить входящую и исходящую скорость интернет-соединения, а также задержку (ping):

![](/.gitbook/assets/user-personal-account11.png)

* **Последнее тестирование** - дата и время любого последнего теста;
* **Источник подключения** - IP-адрес пользователя;
* **Назначение подключения** - IP-адрес NGFW.

Особенности работы:

* Продолжительность каждого теста составляет 10 секунд;
* Тесты запускаются последовательно, в каждый момент времени может быть активен только один тест;
* График обнуляется в момент запуска нового теста.

</details>

Для создания нового правила доступа нажмите **Добавить** и заполните необходимые поля:

![](/.gitbook/assets/user-personal-account.png)

<details>

<summary>Расшифровка полей</summary>

* **Название** - название правила доступа;
* **Источники подключения** - укажите IP-адреса, подсети, страну или домены;
* **Пользователи и группы** - выберите пользователей, группы пользователей, группы безопасности из AD, которым хотите предоставить доступ в личный кабинет;
* **Способ 2FA** - выберите метод двухфакторной аутентификации. Поле может быть пустым;
* **Ресурсы** - укажите необходимые ресурсы, созданные в разделе **ЛК/Портал SSL VPN -> Ресурсы**. Поле может быть пустым;
* **Комментарий** - поле может быть пустым.

</details>

{% hint style="warning" %}
Если у пользователей приватные (серых) IP-адреса, не указывайте в качестве источника страну. Это связано с тем, что такие адреса не относятся к диапазонам IP-адресов ни одной страны и доступ к ним будет запрещен. Рекомендуется использовать диапазон IP-адресов.
{% endhint %}

При наличии большого количества правил доступа в таблице воспользуйтесь кнопкой **Фильтры**.

Обработка правил происходит следующим образом:

1. При входе пользователя в ЛК правила проверяются сверху вниз до первого совпадения по полям **Источник** и **Пользователи и группы**;
2. Если правило разрешающее, то доступные пользователю в ЛК ресурсы определяются этим правилом. Последующие правила с такими же полями учитываться не будут;
3. При изменении таблицы, пользователя, участия пользователя в группах определение доступа пользователя или группы пользователей к ресурсу происходит снова как в пункте 1.

## Внешний вид

На вкладке можно изменить логотип и добавить описание для пользователей, которое будет отображаться рядом с логотипом в личном кабинете и на портале:

![](/.gitbook/assets/user-personal-account8.png)

## Ресурсы

В личном кабинете Ideco NGFW можно разместить информацию о любых ресурсах для пользователей:

![](/.gitbook/assets/user-personal-account2.png)

Чтобы добавить ресурс, перейдите в раздел **Пользователи -> ЛК/Портал SSL VPN -> Ресурсы**, нажмите **Добавить** и заполните поля:

![](/.gitbook/assets/user-personal-account9.png)

<details>

<summary>Расшифровка полей</summary>

**Описание ресурса:**

* **Название** -  имя ресурса, может содержать до 42 символов;
* **Информация о ресурсе** - укажите текстовое описание, которое будет отображаться в личном кабинете, или оставьте поле пустым.

**Настройки:**

* **Вид ресурса** - **Веб-ресурс (HTTPS)**:
  * **Адрес сервера** - укажите доменное имя или IP-адрес сервера;
  * **Порт** - по умолчанию значение 443;
  * **Путь** - укажите путь. чего куда. Поле не является обязательным;
  * **Доверенный сертификат** - загрузите доверенный сертификат. Поле не является обязательным.
* **Вид ресурса** - **Веб-ресурс (HTTP)**:
  * **Адрес сервера** - укажите доменное имя или IP-адрес сервера;
  * **Порт** - по умолчанию значение 80;
  * **Путь** - укажите путь. чего куда. Поле не является обязательным.
* **Вид ресурса** - **Удаленный доступ (SSH)**:
  * **Адрес сервера** - укажите доменное имя или IP-адрес сервера;
  * **Порт** - по умолчанию значение 22;
  * **Отпечаток ключа** - загрузите отпечаток ключа.
* **Вид ресурса** - **Удаленный рабочий стол (RDP)**:
  * **Адрес сервера** - укажите доменное имя или IP-адрес сервера;
  * **Порт** - по умолчанию значение 3389.
* **Дополнительно:**
  * **Комментарий** - поле может быть пустым.

</details>

{% hint style="info" %}
Адреса, на которые ссылается HTTP/HTTPS-ресурс, должны быть относительными во избежание нарушения CORS. Подробнее про [CORS](https://developer.mozilla.org/ru/docs/Web/HTTP/CORS).
{% endhint %}

## Публикация личного кабинета

Чтобы пользователи получили доступ в личный кабинет, он должен быть опубликован. Для публикации ЛК перейдите в раздел **Сервисы -> Обратный прокси** и выполните действия:

1\. Нажмите **Добавить**.

2\. Включите опцию **Внутренний сервис Ideco NGFW**.

3\. В поле **Запрашиваемый адрес в интернете** введите адрес, по которому хотите опубликовать личный кабинет:

![](/.gitbook/assets/reverse-proxy3.png)

4\. Нажмите **Добавить**.

После этого пользователь сможет зайти в личный кабинет по логину и паролю либо через авторизацию в сети NGFW.

## Настройка доступа пользователя в личный кабинет Ideco NGFW

{% hint style="success" %}
Личный кабинет пользователя будет доступен по ссылке, указанной при публикации через обратный прокси.
{% endhint %}

Чтобы зайти в личный кабинет, выполните действия:

1\. Перейдите по ссылке, указанной в правиле публикации личного кабинета.

2\. В открывшейся форме авторизации введите логин и пароль пользователя.

Если пользователь уже авторизован в сети NGFW, то логин и пароль вводить не потребуется, личный кабинет откроется сразу.