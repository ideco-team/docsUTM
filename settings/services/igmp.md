---
description: IGMP Proxy позволяет принимать мультикаст-трафик от провайдера.
---

# IGMP Proxy

{% hint style="success" %}
Название службы раздела **IGMP Proxy**: `ideco-igmpproxy-backend`, `ideco-igmpproxy`. \
Список служб для других разделов доступен по [ссылке](/settings/server-management/terminal/README.md).
{% endhint %}

**IGMP Proxy** - служба, которая проксирует (передает) мультикаст-трафик сквозь роутер. Это сокращает объем трафика, что влияет на скорость работы и нагрузку сети.

Со стороны клиентов **IGMP Proxy** поддерживает версии IGMPv1 и IGMPv2.

{% hint style="info" %}
**IGMP Proxy** работает только с Ethernet-интерфейсами и не работает на интерфейсах VLAN, PPPoE или VPN (L2TP, PPTP).
{% endhint %}

## Настройка в Ideco NGFW

Для настройки перейдите в раздел **Сервисы -> IGMP Proxy**. Включите опцию **IGMP Proxy**. В строке **Подключение к провайдеру** выберите Ethernet-подключение.

![](/.gitbook/assets/igmp-proxy.png)

## Принцип работы

На примере подключения двух пользователей к мультикаст-потоку одного источника:

1\. **Сервер источника** начинает трансляцию мультикаст-трафика с адреса из диапазона 224.0.0.0/4. 

2\. **Пользователь 4** хочет подключиться к трафику и генерирует IGMP-запрос (Join) на **Ideco NGFW** для получения мультикаст-трафика от сервера источника.

3\. **Ideco NGFW** получает IGMP-запрос и отправляет аналогичный запрос к серверу источника.

4\. Сервер источника получает запрос и начинает транслировать мультикаст-трафик на **Ideco NGFW**.

5\. **Ideco NGFW** пропускает трафик с адреса 239.2.2.2 в подсеть с **Пользователем 4**, и **Пользователь 4** становится его получателем:

![](/.gitbook/assets/igmp.png)

6\. **Пользователь 3**, находящийся в другой подсети, также решает подключиться к этой трансляции и генерирует IGMP-запрос (Join) на Ideco NGFW.

7\. **Ideco NGFW** получает этот запрос и дублирует **Пользователю 3** трафик, поступающий **Пользователю 4**:

![](/.gitbook/assets/igmp1.png)

{% hint style="info" %}
Ideco NGFW периодически проверяет, есть ли получатели, отправляя пользователям IGMP-запрос (Query). Пользователи в ответ отправляют Join, как при подключении. \
Если на Ideco NGFW приходит хотя бы один Join, то мультикаст-трафик продолжает транслироваться получателям.
{% endhint %}