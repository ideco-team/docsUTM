---
description: IGMP Proxy позволяет принимать мультикаст-трафик от провайдера и используется для уменьшения нагрузки на сеть.
---

# IGMP Proxy

{% hint style="success" %}
Название службы раздела **IGMP Proxy**: `igmpproxy`. \
Список служб для других разделов доступен по [ссылке](../server-management/terminal.md).
{% endhint %}

{% hint style="info" %}
IGMP Proxy работает только с Ethernet-адаптерами и не работает на интерфейсах VLAN, PPPoE или VPN (L2TP, PPTP).
{% endhint %}

IGMP Proxy - это протокол маршрутизации, позволяющий доставить один поток информации нескольким пользователям в сети. Это сокращает объем трафика, что влияет на скорость работы и нагрузки сети. 

## Принцип работы

В локальной сети используется версии IGMPv1 и IGMPv2.

Принцип работы на примере подключения двух пользователей к мультикаст-трафику одного источника: 
* Сервер источника начинает трансляцию мультикаст-трафика и создает мультикаст-группу с IP-адресом в диапазоне 224.0.0.0-239.255.255.255. 
* Пользователь 4 хочет подключиться к трансляции и генерирует IGMP-запрос (Report) на Ideco UTM для получения мультикаст-трафика от сервера источника. И тем самым становятся получателем трафика, направленного на 224.2.2.2;
* Ideco UTM получает IGMP-запрос, записывает мультикаст-группу в мультикаст-таблицу и с помощью PIM-запроса подписывается на мультикаст-группу сервера источника; 
* Сервер источника получает PIM-запрос и начинает транслировать мультикаст-трафик на Ideco UTM;
* Ideco UTM передает трафик всем получателям 224.2.2.2;
![](../../.gitbook/assets/igmp.png)
* Пользователь 3 так же решает подключиться к этой трансляции и генерирует IGMP-запрос (Report) на Ideco UTM для получения мультикаст-трафика;
* Ideco UTM получает IGMP-запрос от Пользователя 3 и проверяет в мультикаст-таблице совпадение по источнику. Если совпадение найдено, отправляет уже поступающий трафик Пользователю 3;
![](../../.gitbook/assets/igmp1.png)

Ideco UTM переодически проверяет, что получатели для мультикаст-таблицы есть и отправляет пользователям IGMP-запрос (Query). Пользователи в ответ отправляют Report, как при подключении. \
Если на Ideco UTM приходит хотя бы один Report, то мультикаст-трафик продолжает транслироваться получателям.

## Настройка в Ideco UTM

Для настройки перейдите в раздел **Сервисы -> IGMP Proxy**. Переведите раздел **IGMP Proxy** в положение **Включен**. В строке **Подключение к провайдеру** выберите Ethernet подключение.

![](../../.gitbook/assets/igmp2.png)