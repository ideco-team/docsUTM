---
description: >-
    Что такое USB-токены, как их подготовить и настроить на Ideco NGFW.
---

# USB-токены

USB-токен - это аппаратное устройство для безопасного хранения цифровых сертификатов и работы с приватными ключами.

**Ideco NGFW** поддерживает только USB-токен модели **Рутокен ЭЦП 3.0**. USB-токены других моделей могут не отображаться в веб-интерфейсе **Ideco NGFW**.

В таблице USB-токенов представлена информация о серийном номере, модели, метке ключа и корректности настройки USB-токена:

![](/.gitbook/assets/usb_tokens1.png)

{% tabs %}

{% tab title="Статусы токена" %}

![](/.gitbook/assets/icon-tokens-green.png) - токен подключен в USB-разъем сервера;

![](/.gitbook/assets/icon-tokens-grey.png) - токен не подключен в USB-разъем сервера;

![](/.gitbook/assets/icon-tokens-error.png) - возникла ошибка или токен заблокирован.

{% endtab %}

{% tab title="Статусы PIN-кода" %}

![](/.gitbook/assets/icon-pin-green.png) - верный PIN-код;

![](/.gitbook/assets/icon-pin-grey.png) - неизвестный статус PIN-кода:

* PIN-код был введен, но USB-токен не был установлен в USB-разъем сервера;
* USB-токен с верным PIN-кодом был извлечен из USB-разъема сервера.

![](/.gitbook/assets/icon-pin-error.png) - неверный PIN-код.

{% endtab %}

{% endtabs %}

Чтобы проверить содержимое USB-токенов и убедиться, что на них загружены все необходимые сертификаты, нажмите на ![](/.gitbook/assets/icon-tokens-certs.png) у соответствующего USB-токена. Откроется список всех загруженных сертификатов с подробной информацией.

## Подготовка USB-токена

На USB-токен необходимо загрузить два сертификата: доверенный сертификат и сертификат с приватным ключом, который будет использоваться в качестве локального сертификата NGFW. При подготовке USB-токена запишите его серийный номер и PIN-код. Это потребуется для дальнейшей настройки.

Процесс подготовки USB-токена ЭЦП версии 3.0 от компании **Рутокен** подробно описан в документации производителя. В помощь предлагаются статьи, которые помогут разобраться как узнать серийный номер, сменить PIN-код и загрузить сертификаты на USB-токен:

* [Панель управления Рутокен для ОС Windows](https://dev.rutoken.ru/pages/viewpage.action?pageId=72450206);
* [Центр Управления Рутокен для ОС GNU/Linux](https://dev.rutoken.ru/pages/viewpage.action?pageId=132776624);
* [Рутокен и OpenSSL](https://dev.rutoken.ru/pages/viewpage.action?pageId=43450389);
* [Рутокен для КриптоПро](https://dev.rutoken.ru/pages/viewpage.action?pageId=72450167).

## Настройка USB-токена на Ideco NGFW

Для работы Ideco NGFW с USB-токеном необходимо ввести корректный PIN-код. После этого NGFW сможет использовать токен для настройки ГОСТ VPN.

{% hint style="warning" %}
При превышении лимита попыток неправильного ввода PIN-кода устройство будет заблокировано. Лимит устанавливается производителем и считается до правильного ввода PIN-кода.
{% endhint %}

Чтобы добавить новый USB-токен, подключите его к USB-разъему вашего сервера. Нажмите **Добавить** и заполните необходимые поля:

![](/.gitbook/assets/usb_tokens.png)

* **Серийный номер** - формат для **Рутокен ЭЦП 3.0** представлен в виде десятизначного числа. Например, `1157977130`;
* **PIN-код** - на токенах от компании Рутокен установлен PIN-код по умолчанию: `12345678`;
* **Комментарий** - необязательное поле.