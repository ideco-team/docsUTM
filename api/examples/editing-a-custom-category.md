# Редактирование пользовательской категории контент-фильтра

Предполагается, что уже созданы и настроены: 
* пользователи;
* пользовательская категория контент-фильтра (`users.id.3`);
* правило контент-фильтра, в котором используются созданные пользователи и категория. 

Через API требуется редактировать список URL в пользовательской категории (добавить `https://wrong-url.com`), в правила контент-фильтра и пользователей изменения не вносим.

**1\.** Авторизуйте администратора: 

{% code overflow="wrap" %}
```
curl -k -c /tmp/cookie -b /tmp/cookie -X POST https://178.154.205.107:8443/web/auth/login --data '{"login": "логин", "password": "пароль", "recaptcha": "", "rest_path": "/"}'
```
{% endcode %}

Ответ: статус 200.

**2\.** Получите текущий список URL из пользовательских категории:

{% code overflow="wrap" %}
```
curl -k -c /tmp/cookie -b /tmp/cookie https://178.154.205.107:8443/content-filter/users_categories/users.id.3
```
{% endcode %}

Ответ: статус 200.

Ответ будет содержать описание всех пользовательских категорий. Среди них требуется найти `users.id.3`:

{% code overflow="wrap" %}
```
{"id": "users.id.1", "name": "Разрешенный сайты", "description": "Созданы по умолчанию", "urls": ["translate.google.ru", "translate.google.com", "translate.yandex.ru"]}, {"id": "users.id.2", "name": "Запрещенные сайты", "description": "Созданы по умолчанию", "urls": []}, {"id": "users.id.3", "name": "Запрещенные для бухгалтеров", "description": "комментарий", "urls": ["https://yandex.ru"]}
```
{% endcode %}

**3\.** Отредактируйте список URL:

{% code overflow="wrap" %}
```
curl -k -c /tmp/cookie -b /tmp/cookie -X PUT https://178.154.205.107:8443/content-filter/users_categories/users.id.3 --data '{"name": "Запрещенные для бухгалтеров", "description": "комментарий", "urls": ["https://yandex.ru", "https://wrong-url.com"]}'
```
{% endcode %}

Ответ: статус 200.

Тело ответа при добавлении URL в ранее созданную категорию контент-фильтра:

{% code overflow="wrap" %}
```
{"id": "users.id.3", "name": "Запрещенные для бухгалтеров", "description": "комментарий", "urls": ["https://yandex.ru", "https://wrong-url.com"]}
```
{% endcode %}

{% hint style="danger" %}
Запрос перезапишет ранее созданную пользовательскую категорию. Поэтому при выполнении запроса следует указать все URL (старые и новые - указанные при создании категории и те, которые хотите добавить).
{% endhint %}

**Результат**: Правило контент-фильтра, которое использует эту' пользовательскую категорию, будет запрещать пользователям переходить на сайты `https://yandex.ru` и `https://wrong-url.com`/
