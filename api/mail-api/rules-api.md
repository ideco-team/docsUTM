# Правила

## Переадресация

<details>
<summary>Получение правил переадресации</summary>

`GET /mail/rules/alias`

**Ответ на успешный запрос:**

```json5
[
  {
    "id": "string",
    "recipient": "string",
    "map": [
      "string",
      ...
    ]
  },
  ...
]
```

* `id` - идентификатор правила;
* `recipient` - получатель. Не может быть пустой строкой, максимальная длина - 255 символов;
* `map` - массив адресов для пересылки. Если не настроен - пустой массив. Каждый элемент массива не может быть пустой строкой, максимальная длина - 255 символов.

</details>

<details>
<summary>Добавление правил переадресации</summary>

`POST /mail/rules/alias`

**Json-тело запроса:**

```json5
{
  "recipient": "string",
  "map": [
    "string"
  ]
}
```

* `id` - идентификатор правила;
* `recipient` - получатель. Не может быть пустой строкой, максимальная длина - 255 символов;
* `map` - массив адресов для пересылки. Если не настроен - пустой массив. Каждый элемент массива не может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:**

```json5
{
  "id": "string"
}
```

* `id` - идентификатор созданного правила.

</details>

<details>
<summary>Изменение правил переадресации</summary>

`PUT /mail/rules/alias/<id правила>`

**Json-тело запроса:**

```json5
{
  "recipient": "string",
  "map": [
    "string",
    ...
  ]
}
```

* `id` - идентификатор правила;
* `recipient` - получатель. Не может быть пустой строкой, максимальная длина - 255 символов;
* `map` - массив адресов для пересылки. Если не настроен - пустой массив. Каждый элемент массива не может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:** 200 ОК

</details>

<details>
<summary>Удаление правил переадресации</summary>

`DELETE /mail/rules/alias/<id правила>`

**Ответ на успешный запрос:** 200 ОК

</details>

## Разрешенные адреса

<details>
<summary>Получение списка</summary>

`GET /mail/rules/whitelist`

Ответ:

```json5
[
  {
    "id": "string",
    "address": "string",
    "comment": "string",
    "type": "integer"
  },
  ...
]
```

* `id` - идентификатор правила;
* `address` - домен/IP-адрес/адрес почты, который будет исключен из проверок на спам. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов;
* `type` - тип поля `address` (1 - домен, 2 - IP-адрес, 3 - адрес почты).

</details>

<details>
<summary>Создание разрешенного адреса</summary>

`POST /mail/rules/whitelist`

**Json-тело запроса:**

```json5
{
  "address": "string",
  "comment": "string"
}
```

* `address` - домен/IP-адрес/адрес почты, который будет исключен из проверок на спам. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:**

```json5
{
  "id": "string"
}
```

* `id` - идентификатор созданного правила.

</details>

<details>
<summary>Изменение разрешенного адреса</summary>

`PUT /mail/rules/whitelist/<id правила>`

**Json-тело запроса:**

```json5
{
  "address": "string",
  "comment": "string"
}
```

* `address` - домен/IP-адрес/адрес почты, который будет исключен из проверок на спам. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:** 200 ОК

</details>

<details>
<summary>Удаление разрешенного адреса</summary>

`DELETE /mail/rules/whitelist/<id правила>`

**Ответ на успешный запрос:** 200 ОК

</details>

## Запрещенные адреса

<details>
<summary>Получение списка</summary>

`GET /mail/rules/blacklist`

**Ответ на успешный запрос:**

```json5
[
  {
    "id": "string",
    "address": "string",
    "comment": "string",
    "type": "integer"
  },
  ...
]
```

* `id` - идентификатор правила;
* `address` - домен/IP-адрес/адрес почты, который будет отфильтрован. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов;
* `type` - тип поля `address` (1 - домен, 2 - IP-адрес, 3 - адрес почты).

</details>

<details>
<summary>Создание запрещенного адреса</summary>

`POST /mail/rules/blacklist`

**Json-тело запроса:**

```json5
{
  "address": "string",
  "comment": "string"
}
```

* `address` - домен/IP-адрес/адрес почты, который будет отфильтрован. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:**

```json5
{
  "id": "string"
}
```

- `id` - идентификатор созданного правила.

</details>

<details>
<summary>Изменение запрещенного адреса</summary>

`PUT /mail/rules/blacklist/<id правила>`

**Json-тело запроса:**

```json5
{
  "address": "string",
  "comment": "string"
}
```

* `address` - домен/IP-адрес/адрес почты, который будет отфильтрован. Не может быть пустой строкой, максимальная длина - 255 символов;
* `comment` - комментарий. Может быть пустой строкой, максимальная длина - 255 символов.

**Ответ на успешный запрос:** 200 ОК

</details>

<details>
<summary>Удаление запрещенного адреса</summary>

`DELETE /mail/rules/blacklist/<id правила>`

**Ответ на успешный запрос:** 200 ОК

</details>