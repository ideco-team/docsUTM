# Управление администраторами

## Управление локальными администраторами

<details>
<summary>Получение списка локальных администраторов</summary>

```
GET /web/admins/local?format_type=JSON|CSV&columns=['id','name',...]
```

**Параметры запроса:**

* `format_type` - поддерживается `CSV` и `JSON`, по умолчанию `JSON`;
* `columns` - список столбцов, которые попадут в `CSV` отчет, по умолчанию пустой список.

**Ответ на успешный запрос:**

```
[
    {
        "id": "string",
        "enabled": "boolean",
        "name": "string",
        "login": "string",
        "role": "integer",
        "comment": "string",
        "password_timestamp": "integer",
    },
    ...
]
```

* `id` - идентификатор администратора;
* `enabled` - аккаунт включен/выключен (можно/нельзя под ним зайти в систему);
* `name` - имя администратора;
* `login` - логин администратора;
* `role` - идентификатор уровня доступа администратора;
* `comment` - комментарий;
* `password_timestamp` - время (таймстамп) последнего успешного изменения пароля.

</details>

<details>
<summary>Добавление локального администратора</summary>

```
POST /web/admins/local
```

**Json-тело запроса:**

```
{
    "enabled": "boolean",
    "name": "string",
    "login": "string",
    "password": "string",
    "role": "integer",
    "comment": "string",
}
```
**Ответ на успешный запрос:**

```
{
    "id": "string",
}
```

**Ответ обязательно нужно использовать, поскольку бекэнд выполняет нормализацию логина.**

* `enabled` - аккаунт включен/выключен (можно/нельзя под ним зайти в систему);
* `name` - имя, ненулевое текстовое поле, длина от 1 до 42 символов;
* `login` - логин не должен содержать `.` (одну точку) или `..` (две точки), а также символов [\\:/~$!\s@]. Длинна поля от 1 до 42 символов включительно;
* `password` - пароль, ненулевое текстовое поле, длина от 10 до 42 символов;
* `role` - идентификатор уровня доступа аккаунта;
* `comment` - комментарий, максимальная длина 256 символов, **может** быть пустым.

</details>

<details>
<summary>Изменение настроек и пароля локального администратора</summary>

```
PATCH /web/admins/local/$ID
```

`$ID` - идентификатор правила.

**Json-тело запроса:**

Все поля необязательные

```
{
    "enabled": "boolean",
    "name": "string",
    "login": "string",
    "password": "string",
    "role": "integer",
    "comment": "string",
}
```

**Ответ на успешный запрос:** 200 ОК

* `enabled` - аккаунт включен/выключен (можно/нельзя под ним зайти в систему);
* `name` - имя администратора;
* `login` - логин администратора;
* `password` - пароль (если `password==null` пароль останется прежним);
* `role` - идентификатор уровня доступа аккаунта;
* `comment` - комментарий, максимальная длина 256 символов, **может** быть пустым.

**При смене пароля или отключении аккаунта веб-сессии удаляются.**

</details>

<details>
<summary>Удаление локального администратора</summary>

**Последнего локального администратора удалять нельзя!**

```
DELETE /web/admins/local/$ID
```

`$ID` - идентификатор правила.

**Ответ на успешный запрос:** 200 OK

</details>