---
description: Описание настройки в веб-интерфейсе
---

# Первоначальная настройка

**Поддержка браузеров для администрирования сервера в веб-интерфейсе:**
Поддерживаются современные версии браузеров Firefox, Chrome и браузеров, основанных на Chromium.

## Подключение к веб-интерфейсу Ideco NGFW

1. Запустите на любом компьютере в сети Control Plane интерфейса поддерживаемый интернет-браузер.
2. Введите в адресной строке IP-адрес, указанный при настройке Control Plane интерфейса, и порт 8443.\
**Пример:** `192.168.100.25:8443`
3. Браузер выдаст предупреждение о том, что сертификат безопасности не был выпущен доверенным центром сертификации. Продолжите соединение, нажав на соответствующую кнопку в нижней части окна:

![](/.gitbook/assets/initial-setup-web1.gif)

4. Введите логин и пароль от учетной записи, созданной при установке NGFW VPP.

## Импорт корневого сертификата NGFW VPP в браузер

Для устранения предупреждения в браузере при входе в веб-интерфейс нужно импортировать корневой сертификат NGFW VPP или добавить сертификат в **доверенные корневые центры сертификации** устройства.\
В разделе **Сервисы->Сертификаты** нажмите на кнопку ![](/.gitbook/assets/icon-download.png) Скачать:

![](/.gitbook/assets/initial-setup-web2.png)

## Настройка подключения к провайдеру

{% hint style="info" %}
Перед настройкой Data Plane интерфейсов проверьте соответствие сетевых карт [системным требованиям](/general/data-update-source-utm-vpp.md).
{% endhint %}

Для выхода NGFW VPP в Интернет нужно настроить Data Plane интерфейс, выполнив действия:

1. Перейдите в раздел **Сервисы-> Cетевые интерфейсы**.
2. Нажмите **Добавить** и выберите **Внешний Ethernet**:

![](/.gitbook/assets/initial-setup-web4.png)

3. Выберите сетевую карту для Data Plane интерфейса и укажите название интерфейса:

* VPP interface - сетевая карта, подходящая для Data Plane интерфейса.
* Производитель сетевой карты -  сетевая карта, подходящая для Control Plane интерфейса.

![](/.gitbook/assets/initial-setup-web5.png)

4. Воспользуйтесь опцией **Автоматическая конфигурация через DHCP**, если провайдер поддерживает автоматическое конфигурирование, или укажите IP-адрес сервера и шлюз.
   
![](/.gitbook/assets/initial-setup-web6.png)

5. Проверьте правильность введенных данных и нажмите **Сохранить**.

{% hint style="warning" %}
Если ни один из Data Plane интерфейсов не имеет выхода в Интернет, то пользователи шлюза Ideco NGFW VPP не смогут получить доступ в Интернет.
{% endhint %}

## Настройка пользовательского интерфейса

Для организации пользовательской локальной сети нужно настроить Data Plane интерфейс, выполнив действия:

1. Перейдите в раздел **Сервисы-> Сетевые интерфейсы**.
2. Нажмите **Добавить** и выберите **Локальный Ethernet**:

![](/.gitbook/assets/initial-setup-web7.png)

3. Выберите сетевую карту для Data Plane интерфейса и укажите название интерфейса:

* VPP interface - сетевая карта, подходящая для Data Plane интерфейса.
* Производитель сетевой карты -  сетевая карта, подходящая для Control Plane интерфейса.

![](/.gitbook/assets/initial-setup-web5.png)

4. Воспользуйтесь опцией **Автоматическая конфигурация через DHCP**, если используется сторонний DHCP-cервер в пользовательской сети, или укажите IP-адрес сервера.
   
![](/.gitbook/assets/initial-setup-web8.png)

5. Проверьте правильность введенных данных и нажмите **Сохранить**.

{% hint style="warning" %}
Для корректной работы NGFW VPP **не указывайте** шлюз при настройке пользовательских DataPlane интерфейсов. 
{% endhint %}

## Регистрация сервера

### Онлайн регистрация

{% hint style="warning" %}
Для привязки лицензии сервер должен иметь выход в интернет через Control Plane интерфейс.
{% endhint %}

Шаги онлайн регистрации сервера и привязки лицензии:

1\. Перейдите в веб-интерфейс Ideco NGFW VPP в раздел **Управление сервером -> Лицензия** и нажмите **Зарегистрировать**:

![](/.gitbook/assets/initial-setup-web10.png)

2\. В открывшемся окне перейдите по ссылке **Зарегистрировать новый сервер**, выберите компанию и нажмите **Добавить**. После добавления нажмите **Обновить информацию о лицензии** для проверки состояния лицензии:

![](/.gitbook/assets/initial-setup-web11.gif)

### Офлайн-регистрация

Шаги офлайн-регистрации сервера и привязки лицензии:

1\. Привяжите сервер к личному кабинету в [my.ideco](https://my.ideco.ru/):
* Перейдите в веб-интерфейс Ideco NGFW VPP в раздел **Управление сервером -> Терминал**;
* Выполните команду `cat /usr/share/ideco/license-backend/hwid`;
* Скопируйте hwid сервера. Пример: `t7m7H137w-pQXYjXuHmYbLnJw3YyxJAg5wl9FfARlh`;

2\. Обратитесь к вашему менеджеру для предоставления лицензии. 

3\. Перейдите в личный кабинет [my.ideco](https://my.ideco.ru/) в раздел **NGFW -> Офлайн** и заполните поле **HWID** скопированными на шаге 1 данными.

4\. Перейдите в раздел **NGFW -> Лицензирование** и нажмите **Привязать лицензию** рядом с нужным сервером. Пример наименования сервера для офлайн-регистрации: `UTM (UTM Unknown)`.  

Если была выбрана лицензия не подходящая для офлайн-регистрации сервера, то появится ошибка:

![](/.gitbook/assets/initial-setup-web13.png)

5\. Перейдите в раздел **NGFW -> Офлайн** и введите в соответствующие поля цифрами мажорный номер версии и номер лицензии:

![](/.gitbook/assets/initial-setup-web12.png)

6\. Нажмите **Получить ссылки** и сохраните файлы конфигураций, нажав на появившиеся ссылки:
* `license.json` - информация о лицензии;
* `geoip-<timestamp>.mmdb` - база для работы модуля **Предотвращение вторжений**;
* `iplist-<timestamp>.tar.gz` - база соответствия подсетей и стран, в которые они входят;
* `simple.tgz` - правила фильтрации для модуля **Предотвращение вторжений**;
* `sky-from-0-to-<timestamp>.sst` - база для работы модуля **Контент-фильтр**.

7\. Добавьте конфигурационный файл c информацией о лицензии в Ideco NGFW VPP:
* Перейдите в раздел **Управление сервером -> Терминал**;
* Загрузите полученный файл `license.json` на сервер Ideco NGFW VPP в директорию `/var/cache/ideco/license-backend/`;
* Перезапустите сервис лицензий командой `systemctl restart ideco-license-backend.service`;
* Перейдите в раздел **Управление сервером - Лицензия** и убедитесь, что лицензия установлена.

8\. Сохраните скрипты запуска обновления баз модулей безопасности в папку с файлами, скачанными на шаге 6:

{% file src="/scripts/content_filter.py";base64,Cg==" name="content_filter.py" %}
{% file src="/scripts/geoip.py";base64,Cg==" name="geoip.py" %}
{% file src="/scripts/iplist.py";base64,Cg==" name="iplist.py" %}
{% file src="/scripts/suricata.py";base64,Cg==" name="suricata.py" %}

9\. Обновите базы модулей безопасности: 
* Перейдите в директорию `scp -r <путь до папки со скачанными файлами> administrator@<IP-адрес NGFW>:~/`;
* Подключитесь к серверу по SSH `ssh administrator@<IP-адрес NGFW VPP>`;
* Перед обновлением модулей перейдите в директорию `cd ~/<название папки со скаченными файлами>`;
* Обновите базы модулей безопасности выполнив команды:
  * Базы модуля **Предотвращения вторжений** - `python3 geoip.py <geoip-<timestamp>.mmdb>`;
  * Базы соответствия подсетей и стран - `python3 iplist.py <iplist-<timestamp>.tar.gz>`;
  * Правила фильтрации модуля **Предотвращение вторжений** - `python3 suricata.py simple.tgz`;
  * базы модуля **Контент-фильтр** - `python3 content_filter.py <sky-from-0-to-<timestamp>.sst>`.

{% hint style="info" %}
Для регистрации сервера нужна учетная запись на [MY.IDECO](https://my.ideco.ru/). Подробнее в статье [MY.IDECO](my-ideco.md).
{% endhint %}