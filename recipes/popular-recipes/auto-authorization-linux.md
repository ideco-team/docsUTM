---
description: >-
    Процесс автоматической аутентификации пользователя на Ideco UTM с помощью скрипта при входе в систему.
---

## Инструкция по настройке автоматической веб-аутентификации на Ideco UTM

Для настройки автоматической аутентификации выполните действия:

1. Перейдите в домашнюю директорию пользователя и включите показ скрытых файлов.
2. Перейдите в папку `.config` и создайте там каталог `ideco-utm`.
3. Скачайте корневой сертификат UTM (подробнее в [статье](../../settings/services/certificates/README.md)) и поместите его в каталог, созданный на предыдущем шаге.
4. Cоздайте в папке `ideco-utm` файл `auth.conf` с логином и паролем пользователя:

```
login=логин_пользователя
password=пароль_пользователя
```

5. Cкопируйте скрипт в систему и настройте автозагрузку:

{% file src="../../scripts/auto-web-auth-linux.py";base64,Cg==" name="auto-web-auth-linux.py" %}

{% hint style="warning" %}
Для корректной работы скрипта имя корневого сертификата должно быть `root_ca.crt`.
{% endhint %}

## Настройка автозагрузки скрипта
Для настройки выясните возможность добавления приложений в автозагрузку через графический интерфейс. При отсутствии такой возможности настройте автозагрузку через терминал.

{% hint style="info" %}
Для настройки через терминал потребуются права администратора.
{% endhint %}
### Настройка через терминал:

{% hint style="info" %}
Если сделать скрипт исполняемым файлом командой `chmod +x <путь до скрипта>`, можно не указывать путь до python.
{% endhint %}

1. Откройте терминал и введите команду \
`sudo nano /etc/systemd/system/auto-authorization.service`
2. Заполните файл следующим образом:

```
[Unit]
Description=Auto-Authorization

[Service]
Type=simple
User=имя_пользователя_в_системе
ExecStart=полный_путь_до_python полный_путь_до_скрипта

[Install]
WantedBy=multi-user.target
```

3. Сохраните файл и выйдите из редактора.
4. Добавьте службу в автозагрузку командой `systemctl enable auto-authorization`.

{% hint style="info" %}
Скрипт поддерживает множество ключей, с помощью которых можно менять путь к файлам и другие параметры. Для вывода справки утилиты используйте ключ `-h`.
{% endhint %}

{% hint style="info" %}
Для проверки статуса ранее настроенной службы введите `systemctl status auto-authorization.service`
{% endhint %}